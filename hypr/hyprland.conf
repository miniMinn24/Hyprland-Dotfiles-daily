# 
# ██╗  ██╗██╗   ██╗██████╗ ██████╗ ██╗      █████╗ ███╗   ██╗██████╗ 
# ██║  ██║╚██╗ ██╔╝██╔══██╗██╔══██╗██║     ██╔══██╗████╗  ██║██╔══██╗
# ███████║ ╚████╔╝ ██████╔╝██████╔╝██║     ███████║██╔██╗ ██║██║  ██║
# ██╔══██║  ╚██╔╝  ██╔═══╝ ██╔══██╗██║     ██╔══██║██║╚██╗██║██║  ██║
# ██║  ██║   ██║   ██║     ██║  ██║███████╗██║  ██║██║ ╚████║██████╔╝
# ╚═╝  ╚═╝   ╚═╝   ╚═╝     ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═╝  ╚═══╝╚═════╝  
#                                           Re-configured by miniMinn

## -- STARTUP PROGRAMS -- ##
# System
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP & 
exec-once = wl-clip-persist --clipboard regular &
exec-once = nm-applet --indicator
exec-once = /usr/lib/polkit-kde-authentication-agent-1 &
#exec-once = ~/.config/hypr/scripts/mic.sh mute &
#exec-once = ~/.config/hypr/scripts/system/check_updates.sh
exec-once = hypridle
exec-once = hyprpm reload &

# Desktop
exec-once = nwg-drawer -fm nemo -r -nofs &
#exec-once = nwg-dock-hyprland -l top -i 74 -hd 40 -nolauncher -p bottom &
exec-once = waybar -c ~/.config/waybar/config-simple -s ~/.config/waybar/style-simple.css &
exec-once = waybar -c ~/.config/waybar/config-task -s ~/.config/waybar/style-task.css &
# exec-once = waybar -c ~/.config/waybar/config-win -s ~/.config/waybar/style-win.css &
exec= waypaper --restore &
exec-once = swww-daemon --format xrgb &
exec-once = swaync &
exec-once = swaync-client &
# exec-once = kitty &

## -- MONITORS -- ##
# Configured with nwg-displays
source = ~/.config/hypr/monitors.conf


## -- DEFAULT ENV VARIABLES -- ##
env = WLR_NO_HARDWARE_CURSORS,1
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_QPA_PLATFORM,wayland
env = WLR_RENDERER_ALLOW_SOFTWARE,1
env = QT_QPA_PLATFORMTHEME,kde**.**
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_MENU_PREFIX,arch-

# Cursor style
env = XCURSOR_SIZE,24
env = XCURSOR_THEME, Bibata-Modern-Ice


## -- KEYBOARD & INPUT PREFERENCES -- ##
input {
    kb_layout      = us,mm
    kb_options     = grp:win_space_toggle
    accel_profile  = adaptive
    follow_mouse   = 1
    sensitivity    = 0
    force_no_accel = 0

    touchpad {
        natural_scroll       = yes
        clickfinger_behavior = 0
        scroll_factor        = 0.4
        tap-to-click         = true
        disable_while_typing = false
    }
    touchdevice {
        enabled = false 
    }
}

# USB mouse sensitivity preference
device {
    name        = -usb-optical-mouse
    sensitivity = -0.65
}

## -- YEET ANIMATIONS -- ##
animations {
    enabled = true 
    # Animation curves
    
    bezier = linear, 0, 0, 1, 1
    bezier = md3_standard, 0.2, 0, 0, 1
    bezier = md3_decel, 0.05, 0.7, 0.1, 1
    bezier = md3_accel, 0.3, 0, 0.8, 0.15
    bezier = overshot, 0.05, 0.9, 0.1, 1.1
    bezier = crazyshot, 0.1, 1.5, 0.76, 0.92 
    bezier = hyprnostretch, 0.05, 0.9, 0.1, 1.0
    bezier = menu_decel, 0.1, 1, 0, 1
    bezier = menu_accel, 0.38, 0.04, 1, 0.07
    bezier = easeInOutCirc, 0.85, 0, 0.15, 1
    bezier = easeOutCirc, 0, 0.55, 0.45, 1
    bezier = easeOutExpo, 0.16, 1, 0.3, 1
    bezier = softAcDecel, 0.26, 0.26, 0.15, 1
    bezier = md2, 0.4, 0, 0.2, 1 # use with .2s duration
    # Animation configs
    animation = windows, 1, 3, overshot, popin
    animation = windowsIn, 1, 3, overshot, slide
    animation = windowsOut, 1, 30, crazyshot, slide
    animation = border, 1, 10, default
    animation = fade, 1, 3, default
    animation = layers, 1, 2, md3_decel, slide
    animation = layersIn, 1, 3, menu_decel, slide
    animation = layersOut, 1, 1.6, menu_accel
    animation = fadeLayersIn, 1, 2, menu_decel
    animation = fadeLayersOut, 1, 0.5, menu_accel
    # animation = workspaces, 0, 0, menu_decel, slide
    # animation = workspaces, 1, 2.5, softAcDecel, slide
    animation = workspaces, 1, 7, menu_decel, slidefade 15%
    # animation = specialWorkspace, 1, 3, md3_decel, slidefadevert 15%
    animation = specialWorkspace, 1, 3, md3_decel, slidevert
}
misc {
    vfr = 1
    vrr = 1
    animate_manual_resizes = true
    focus_on_activate = true
    animate_mouse_windowdragging = true 
    enable_swallow = false
    swallow_regex = (foot|allacritty|Alacritty)
    
    disable_hyprland_logo = true
    force_default_wallpaper = 0
    new_window_takes_over_fullscreen = 2
    allow_session_lock_restore = true
    
    initial_workspace_tracking = false
}

xwayland {
  force_zero_scaling = true
}

# Hyprland Plugins 
plugin {
    hyprexpo {
        columns = 3
        gap_size = 0
        bg_col = rgb(000000)
        workspace_method = first 1 # [center/first] [workspace] e.g. first 1 or center m+1

        enable_gesture = false # laptop touchpad, 4 fingers
        gesture_fingers = 4
        gesture_distance = 400 # how far is the "max"
        gesture_positive = false
        disableBlur = true
    }
      hyprbars {
        enabled = 1
        bar_title_enabled = true 
        bar_part_of_window = true
        bar_padding = 7
        bar_height = 20
        bar_precedence_over_border = true
        bar_blur = true
        col.text = rgba(ffffffcc)
        bar_text_font = Ubuntu
        bar_text_size = 10
        on_double_click = hyprctl dispatch fullscreen 1

        bar_color = rgba(1A1B26aa) 
        hyprbars-button = rgb(ff4040), 10, , hyprctl dispatch killactive
        hyprbars-button = rgb(00ffff), 10, , hyprctl dispatch fullscreen
        hyprbars-button = rgb(00bfff), 10, , hyprctl dispatch togglefloating 

        # cmd to run on double click of the bar
        on_double_click = hyprctl dispatch fullscreen 1
    }

    overview {
        enabled = false
        exitOnSwitch = true 
        affectStrut = false
        panelHeight = 160
        centerAligned = true
    }
}


## -- BETTER LEAVE THEM ALONE -- ##
dwindle {
    pseudotile     = yes
    preserve_split = yes # you probably want this
}

gesture = 3, horizontal, workspace,

## -- WINDOWS MARGINS & BORDERS -- ##
general {
    gaps_in     = 10, 10, 10, 10
    gaps_out    = 20, 20, 20, 20
    border_size = 0
    layout      = dwindle
    col.active_border   = rgba(1A1B26aa)
    col.inactive_border = rgba(1A1B26aa)
}


## -- WINDOWS DECORATION -- ##
decoration {
    rounding = 10
        blur {
        enabled = false 
        xray = false 
        special = false
        new_optimizations = true
        size = 3
        passes = 1
        brightness = 1
        noise = 0
        contrast = 1
        popups = true
        popups_ignorealpha = 0.6
    }
    
    # Shadow
    shadow {
        enabled = true
        ignore_window = true
        range = 10
        offset = 0 2
        render_power = 2
        color = rgba(0000003F)
    }

    active_opacity     = 1.0
    inactive_opacity   = 1.0
    fullscreen_opacity = 1.0
}

## -- WINDOWS RULES -- ##
# Opacity
windowrulev2 = opacity 1,class:^(kitty)$
windowrulev2 = opacity 0.96,class:^(nemo)$
windowrulev2 = opacity 0.96,class:^(org.gnome.Nautilus)$
windowrulev2 = opacity 0.80,class:^(thunar)$
windowrulev2 = opacity 1,class:^(code-oss)$
windowrulev2 = opacity 1,class:^(firefox)$
windowrulev2 = opacity 1,class:^(Telegram)$
# windowrulev2 = opacity 0.85,class:^(org.gnome.gedit)$
windowrulev2 = opacity 0.92,class:^(eDEX-UI)$
windowrulev2 = opacity 0.92 0.85,class:^(Spotify)$
windowrulev2 = opacity 0.0 override 0.0 override,class:^(xwaylandvideobridge)$
windowrulev2 = noanim,class:^(xwaylandvideobridge)$
windowrulev2 = nofocus,class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus,class:^(xwaylandvideobridge)$
windowrulev2 = nofocus,class:^(jetbrains-.*)$,title:^(win[0-9]+)$ # prevents JetBrains IDE's tooltips from blinking
windowrulev2 = opacity 1, class:^(obsidian)$

# PLUGIN: Hyprbars specification for windows
windowrulev2 = plugin:hyprbars:nobar, class:^(wofi)
windowrulev2 = plugin:hyprbars:nobar, class:^(firefox)
windowrulev2 = plugin:hyprbars:nobar, class:^(brave-browser)
windowrulev2 = plugin:hyprbars:nobar, class:^(ONLYOFFICE)
windowrulev2 = plugin:hyprbars:nobar, class:^(org.gnome.gedit)
windowrulev2 = plugin:hyprbars:nobar, class:^(obsidian)

# Float, size, position
windowrule = float, class:kitty
windowrule = size 70% 70%, class:kitty
windowrule = center, class:kitty
# windowrule = float, class:nemo
# windowrule = size 50% 60%, class:nemo
# windowrule = center, class:nemo
windowrule = float, class:audacious
windowrule = size 50% 60%, class:audacious
windowrule = center, class:audacious
windowrule = center, class:wofi
windowrule = float, size 65% 75%, center, class:waypaper
windowrule = float, size 65% 65%, center, class:xed
windowrule = float, size 45% 65%, center, class:pavucontrol
windowrule = float, size 65% 65%, center, class:xviewer
windowrule = float, class: nwg-look
windowrule = size 65% 65%, class:nwg-look
windowrule = center, class:nwg-look
windowrule = float, size 65% 70%, center, class:nwg-displays
windowrule = float, size 65% 80%, center, class:qalculate-gtk
windowrule = float, size 96% 90%, center, class:mpv
windowrule = float, size 65% 80%, center, class:org.gnome.Calendar
windowrule = float, class:org.gnome.gedit
windowrule = size 50% 60%, class:org.gnome.gedit
windowrule = center, class:org.gnome.gedit
windowrule = noanim, class:wofi

## -- LAYERRULES -- ##
layerrule = noanim, selection   
layerrule = blur, nwg-drawer
layerrule = dimaround, nwg-drawer
layerrule = blur, wofi
layerrule = blur, waybar
layerrule = blur, swaync-control-center
layerrule = blur, swaync-notification-window
layerrule = ignorezero, waybar
layerrule = ignorealpha 0.5, waybar
layerrule = xray, waybar
layerrule = xray, swaync-control-center
layerrule = xray, swaync-notification-window
layerrule = xray, wofi
layerrule = ignorezero, wofi
layerrule = ignorezero, swaync-control-center
layerrule = ignorezero, swaync-notification-window
layerrule = animation slide right, swaync-control-center
layerrule = animation slide right, swaync-notification-window
layerrule = ignorealpha 0.5, wofi
layerrule = ignorealpha 0.5, swaync-control-center
layerrule = ignorealpha 0.5, swaync-notification-window
layerrule = animation fade, nwg-drawer
layerrule = animation slide, ^(wofi)$

## -- KEYBINDS -- ##
$mainMod         = SUPER
$terminal        = kitty
$menu            = nwg-drawer
$menuAlt         = killall wofi || wofi --show drun
$powerMenu       = killall wlogout || wlogout
$lockScreen      = ~/.config/hypr/scripts/wlogoutsh/lock.sh
$office          = /usr/bin/desktopeditors
$browser         = firefox
$fileManager     = dolphin
$passwordManager = bitwarden-desktop
$notePad         = env GTK_THEME='Qogir-Light' xed
$vscode          = code
$notiCenter      = swaync-client -t -sw
$taskbar         = ~/.config/hypr/scripts/reload_taskbar.sh
$calendar        = killall gnome-calendar || gnome-calendar
$musicPlayer     = audacious
$noteTaking      = obsidian

# App Shortcuts
bind = $mainMod, K, exec, $terminal
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, U, exec, $passwordManager
bind = $mainMod, S, exec, $menu
bind = $mainMod SHIFT, S, exec, $menuAlt 
bind = $mainMod, I, exec, $vscode
bind = $mainMod, T, exec, Telegram
bind = $mainMod, N, exec, $notePad
bind = $mainMod, O, exec, $noteTaking
bind = $mainMod, P, exec, $browser
bind = $mainMod, X, exec, $notiCenter
bind = $mainMod, C, exec, $calendar
bind = $mainMod, D, exec, discord
bind = $mainMod, M, exec, $musicPlayer

# System Shortcuts
bind = $mainMod, Q, killactive,
bind = $mainMod, R, togglefloating,
bind = $mainMod, J, togglesplit,
bind = $mainMod, F, fullscreen
bind = $mainMod ALT, L, exec, $powerMenu
bind = $mainMod SHIFT, A, exec, $lockScreen
bind = $mainMod SHIFT, U, exec, ~/.config/hypr/scripts/change_style/toggle.sh toggle
bind = $mainMod, TAB, hyprexpo:expo, toggle  # of course, bind your own keys
# bind = $mainMod SHIFT, F, fullscreen, 1
bind = $mainMod, W, exec, killall -SIGUSR1 waybar
bind = $mainMod ALT, H, exec, ~/.config/hypr/scripts/toggle_hyprbars.sh
# bind = $mainMod SHIFT, TAB, overview:toggle


# Audio
bind =, XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.4 @DEFAULT_AUDIO_SINK@ 5%+
bind =, XF86AudioLowerVolume, exec, wpctl set-volume -l 1.4 @DEFAULT_AUDIO_SINK@ 5%-
bind =, XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle

# Brightness
bind =, XF86MonBrightnessDown, exec, brightnessctl set 5%-
bind =, XF86MonBrightnessUp, exec, brightnessctl set 5%+

# Hyprctl Shortcuts
bind = $mainMod SHIFT, D, exec, ~/.config/hypr/scripts/change_windows_layout.sh
bind = $mainMod, B, exec, ~/.config/hypr/scripts/blur.sh
bind = $mainMod, A, exec, ~/.config/hypr/scripts/animation.sh
bind = $mainMod SHIFT, T, exec, ~/.config/hypr/scripts/toggle_touchscreen.sh

# Screenshot
bind = $mainMod, Insert, exec, hyprshot -o ~/Pictures/Screenshots -m region
bind = $mainMod, Print, exec, hyprshot -o ~/Pictures/Screenshots -m output -m active -s
bind = $mainMod, Delete, exec, hyprshot -o ~/Pictures/Screenshots -m window

# EWW Widgets 
#bind = $mainMod, A, exec, eww -c ~/.config/eww open --toggle actions
#bind = $mainMod SHIFT, A, exec, eww -c ~/.config/eww open --toggle dashboard
#bind = $mainMod, C, exec, eww -c ~/.config/eww open --toggle date

# Move Focus
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Move Windows
bind = $mainMod ALT, left, movewindow, l
bind = $mainMod ALT, right, movewindow, r
bind = $mainMod ALT, up, movewindow, u
bind = $mainMod ALT, down, movewindow, d

# Resize Windows
bind = $mainMod SHIFT, left, resizeactive, -30 0
bind = $mainMod SHIFT, right, resizeactive, 30 0
bind = $mainMod SHIFT, up, resizeactive, 0 -30
bind = $mainMod SHIFT, down, resizeactive, 0 30

# Switch Workspaces - mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move Active Window To a Workspace - mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10
bind = $mainMod SHIFT, L, movetoworkspace, +1
bind = $mainMod SHIFT, H, movetoworkspace, -1

# Move Existing Workspaces - mainMod + Scroll (and) mainMod + Arrow keys
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1
bind = $mainMod, L, workspace, +1
bind = $mainMod, H, workspace, -1

# Move/Resize Windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
